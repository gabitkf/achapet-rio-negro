<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>
</head>

<body>

<h2>Cadastrar Animal</h2>

<form id="cadastroForm">
  <input type="text" id="nome" placeholder="Nome" required><br><br>
  <textarea id="descricao" placeholder="Descrição" required></textarea><br><br>
  <input type="text" id="contato" placeholder="Contato" required><br><br>
  <input type="text" id="foto" placeholder="Link da foto" required><br><br>
  <button type="submit">Cadastrar</button>
</form>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAUdxwnfX2QVhVqXUu_fckMzSA2fIiym9Y",
    authDomain: "achapet-rio-d4fe0.firebaseapp.com",
    projectId: "achapet-rio-d4fe0",
    messagingSenderId: "388933186374",
    appId: "1:388933186374:web:f5b3dc0afbb33e9a0d2b47"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  alert("Firebase inicializado");

  const form = document.getElementById("cadastroForm");

  form.addEventListener("submit", async function(e) {
    e.preventDefault();

    const nome = document.getElementById("nome").value;
    const descricao = document.getElementById("descricao").value;
    const contato = document.getElementById("contato").value;
    const foto = document.getElementById("foto").value;

    try {
      await addDoc(collection(db, "animais"), {
        nome: nome,
        descricao: descricao,
        contato: contato,
        foto: foto
      });

      alert("CADASTRO FEITO COM SUCESSO");
      form.reset();

    } catch (erro) {
      alert("ERRO AO SALVAR");
      console.error(erro);
    }
  });
</script>

</body>
</html>
